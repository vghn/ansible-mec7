---
- name: Common
  hosts: all
  become: yes
  roles:
    - role: geerlingguy.repo-epel
      when: ansible_os_family == "RedHat"
    - role: yatesr.timezone
      when: timezone is defined and timezone
    - role: geerlingguy.pip
      when: pip_install_packages is defined and pip_install_packages|length > 0
    - role: geerlingguy.swap
      when: swap_file_size_mb is defined
    - role: vladgh.common
    - role: vladgh.smtp
      when: >
        smtp_server_address is defined and smtp_server_address and
        smtp_user is defined and smtp_user
